$(function(){$(document).ajaxStop($.unblockUI);$("#sortType").on("change",function(){sortFilterPageResults(1)});$("#hotelName").on("input",function(){sortFilterPageResults(1)});$(":checkbox").on("change",function(){sortFilterPageResults(1)});$("#minRating").on("input",function(){const n=$("#minRating").val();($.isNumeric(n)||n==="")&&sortFilterPageResults(1)});$("#maxRating").on("input",function(){const n=$("#maxRating").val();($.isNumeric(n)||n==="")&&sortFilterPageResults(1)});$("#minCost").on("input",function(){const n=$("#minCost").val();(n.length>=2&&$.isNumeric(n)||n==="")&&sortFilterPageResults(1)})});const sortFilterPageResults=n=>{$.blockUI({message:null});const i=$("#hotelName").val(),r=getNumericValue($("#sortType").val()),u=getNumericValue($("#minRating").val()),f=getNumericValue($("#maxRating").val()),e=getNumericValue($("#minCost").val());var t=[];$("input:checkbox[name=stars]:checked").each(function(){const n=getNumericValue($(this).val());t.push(n)});const o={pageIndex:n,sortType:r,name:i,stars:t,minUserRating:u,maxUserRating:f,minCost:e};fetch("Hotels/Results",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(o)}).then(n=>{if(n.ok){const t=n.headers.get("content-type");if(t&&t.includes("text/html"))return n.text()}refreshPage("Search failed.");throw new Error("Search failed.");},n=>console.log(n.message)).then(n=>{refreshPage(n)}).catch(n=>{console.log(n.message)})},refreshPage=n=>{$.unblockUI(),$("div#hotelResults").html(n)},getNumericValue=n=>$.isNumeric(n)?Number(n):0;